{% extends "base_client.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}

<main id="main" class="main">

 
      <div class="row justify-content-center" >
          <div class="col-lg-16 col-md-16">
              <div class="card mb-4">
                  <div class="card-body">
                      <h4 style= "padding-top: 10px;">Upload Input Data</h4>

                      <p style="color: #dc3545; font-weight: 500;">
                          Please make sure that the file is in .xlsx format (Excel File).
                          <span style="color: black"> <b>"Choose File"</b> first before clicking the <b>"Submit File"</b> button.</span>
                      </p>
                      
                          <hr style="margin-bottom: 30px;">
                      <p>
                          <form
                              method="POST"
                              enctype="multipart/form-data"
                          >
                              {% csrf_token %}
                         
                          {{form|crispy}}
                              <button
                                  type="submit"
                                  class="btn btn-outline-success btn-sm"
                                  style="height: 40px; width: 100px; margin-top: 35px; padding: 1px;"
                              >View File</button>
                          </form>
                      </p>
                  </div>
              </div>
          </div>
      </div>


  {% if df_html %}


    <div class="row justify-content-center" style = "margin-top: 50px;">
        <div class="col-lg-16 col-md-16">
           
                    <h4 style= "padding-top: 10px;">View Input Data</h4>
                        <hr style="margin-bottom: 30px;">
                    <p>

                        <p class="message-text">
                            <li>
                                If <b style="color: rgb(2, 96, 68);">satisfied</b> with Data, please press submit button below.
                            </li>

                            <li>
                                If not, you can <b style="color:rgb(255, 4, 21)">reupload</b> the excel file above.
                            </li>
                    </p>
        </div>
    </div>



  <br>

  <div class="card-container row">

    <div class="row">
        <form
            method="post"
            action="{% url 'submit_upload' tbl %}"
        >
            {% csrf_token %}

            <input
                type="hidden"
                name="df_html"
                value="{{ df_html }}"
            ></input>

                <div class="row justify-content-left">
                    <div class="col-auto">
                        <input
                            class="btn btn-success"
                            type="submit"
                            style="margin-bottom: 15px;"
                            value="Submit"
                        />
                    </div>
                    <div class="col-auto">
                        <button
                            class="btn btn-outline-danger"
                            style="margin-bottom: 15px;"
                            type="button"
                            onclick="location.href='{% url 'data_input' %}'"
                        >Cancel</button>
                    </div>
             
            </div>
           
        </form>

        
            

        <!-- <center>
          <button class="btn btn-sm btn-outline-info"> Submit</button>
          <button class="btn btn-sm btn-outline-danger"> Return</button>
          </center> -->
    </div>

        <div class="card col-lg-16">
            <div class="card-body no-padding">
                <h5 class="card-title">Uploaded Data</h5>

                <table class= "table table-striped">{{ df_html|safe }}</table>
            </div>
        </div>
  
             
                

                       
                  
                </div>



  {% endif %}

</main>

{% endblock content %}