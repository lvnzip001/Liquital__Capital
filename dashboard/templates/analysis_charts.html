{% extends "base_client.html" %}
{% load static %}

{% block content %}
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <main id="main" class="main">
      <div class="pagetitle">
        <h1>Dashboard</h1>
        <nav>
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="dashboard.html">Home</a></li>
            <li class="breadcrumb-item active">Dashboard</li>
          </ol>
        </nav>
      </div>
      <!-- End Page Title -->

      <section class="section dashboard">
        <div class="row">
          <!-- Left side columns -->
          <div class="col-lg-12">
            <div class="row">
              <!-- Sales Card -->
              <div class="col-xxl-2 col-xl-6">
                <div class="card info-card sales-card">
            

                  <div class="card-body">
                    <h5 class="card-title">Total Loans No# <span>| This Year</span></h5>

                    <div class="d-flex align-items-center">
                      <div
                        class="card-icon rounded-circle d-flex align-items-center justify-content-center"
                      >
                        <i class="bi bi-cart"></i>
                      </div>
                      <div class="ps-3">
                        <h6>{{number_of_loans}}</h6>
                        
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- End Sales Card -->

              <!-- Revenue Card -->
              <div class="col-xxl-2 col-xl-6">
                <div class="card info-card revenue-card">
                 

                  <div class="card-body">
                    <h5 class="card-title">
                      Total Loan Revenue <span>| This Year</span>
                    </h5>

                    <div class="d-flex align-items-center">
                      <div
                        class="card-icon rounded-circle d-flex align-items-center justify-content-center"
                      >
                        <i class="bi bi-currency-dollar"></i>
                      </div>
                      <div class="ps-3">
                        <h6>R{{total_loan_amount}}M</h6>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- End Revenue Card -->

              <!-- Customers Card -->
              <div class="col-xxl-2 col-xl-6">
                <div class="card info-card customers-card">
                  

                  <div class="card-body">
                    <h5 class="card-title">
                      Average Loan Amount <span>| This Year</span>
                    </h5>

                    <div class="d-flex align-items-center">
                      <div
                        class="card-icon rounded-circle d-flex align-items-center justify-content-center"
                      >
                        <i class="bi bi-calculator"></i>
                      </div>
                      <div class="ps-3">
                        <h6>R{{average_loan_amount}}K</h6>
                     
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-xxl-2 col-xl-6">
                <div class="card info-card customers-card">
                  

                  <div class="card-body">
                    <h5 class="card-title">
                      Average Interest Charge <span>| This Year</span>
                    </h5>

                    <div class="d-flex align-items-center">
                      <div
                        class="card-icon rounded-circle d-flex align-items-center justify-content-center"
                        style='color: #17BEBB;
                        background: #D6E8E7'
                      >
                        <i class="bi bi-percent"></i>
                      </div>
                      <div class="ps-3">
                        <h6>{{average_interest_charge}}%</h6>
                     
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-xxl-2 col-xl-6">
                <div class="card info-card customers-card">
                  

                  <div class="card-body">
                    <h5 class="card-title">
                      Total Settlement Amount <span>| This Year</span>
                    </h5>

                    <div class="d-flex align-items-center">
                      <div
                        class="card-icon rounded-circle d-flex align-items-center justify-content-center"
                        style='color: #2E5266;background: #BAD7E8'
                      >
                        <i class="bi bi-graph-up"></i>
                      </div>
                      <div class="ps-3">
                        <h6>R{{total_settlement_amount}}M</h6>
                     
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-xxl-2 col-xl-6">
                <div class="card info-card customers-card">
                  

                  <div class="card-body">
                    <h5 class="card-title">
                      Jobs Created <span>| This Year</span>
                    </h5>

                    <div class="d-flex align-items-center">
                      <div
                        class="card-icon rounded-circle d-flex align-items-center justify-content-center"
                        style='color: #FF6B6B;
                        background: #FFE3E3'
                      >
                        <i class="bi bi-people"></i>
                      </div>
                      <div class="ps-3">
                        <h6>{{jobs_created}}</h6>
                     
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- End Customers Card -->

              <!-- Reports -->
              <div class="col-lg-4">
                <div class="card">
                  <div class="filter">
                    <a class="icon" href="#" data-bs-toggle="dropdown"
                      ><i class="bi bi-three-dots"></i
                    ></a>
                    <ul
                      class="dropdown-menu dropdown-menu-end dropdown-menu-arrow"
                    >
                      <li class="dropdown-header text-start">
                        <h6>Filter</h6>
                      </li>

                      <li><a class="dropdown-item" href="#">Today</a></li>
                      <li><a class="dropdown-item" href="#">This Month</a></li>
                      <li><a class="dropdown-item" href="#">This Year</a></li>
                    </ul>
                  </div>

                  <div class="card-body">
                    <h5 class="card-title">Risk Allocation <span>/Today</span></h5>

                    


                    <div id="risk-allocation-chart"></div>

                   
                
                 
                    <!-- End Line Chart -->
                  </div>
                </div>
              </div>

              <div class="col-lg-8">
                <div class="card">
                  <div class="filter">
                    <a class="icon" href="#" data-bs-toggle="dropdown"
                      ><i class="bi bi-three-dots"></i
                    ></a>
                    <ul
                      class="dropdown-menu dropdown-menu-end dropdown-menu-arrow"
                    >
                      <li class="dropdown-header text-start">
                        <h6>Filter</h6>
                      </li>

                      <li><a class="dropdown-item" href="#">Today</a></li>
                      <li><a class="dropdown-item" href="#">This Month</a></li>
                      <li><a class="dropdown-item" href="#">This Year</a></li>
                    </ul>
                  </div>

                  <div class="card-body">
                    <h5 class="card-title">Risk Proportions <span>/Today</span></h5>

           
                    <div id="risk-proportions-chart"></div>
                
                 
                    <!-- End Line Chart -->
                  </div>
                </div>
              </div>
              <!-- End Reports -->

              <!-- Recent Maturity -->
              <div class="col-lg-6">
                <div class="card">
                  <div class="filter">
                    <a class="icon" href="#" data-bs-toggle="dropdown"
                      ><i class="bi bi-three-dots"></i
                    ></a>
                    <ul
                      class="dropdown-menu dropdown-menu-end dropdown-menu-arrow"
                    >
                      <li class="dropdown-header text-start">
                        <h6>Filter</h6>
                      </li>

                      <li><a class="dropdown-item" href="#">Today</a></li>
                      <li><a class="dropdown-item" href="#">This Month</a></li>
                      <li><a class="dropdown-item" href="#">This Year</a></li>
                    </ul>
                  </div>

                  <div class="card-body">
                    <h5 class="card-title">Loans Advanced vs Maturities <span>/Today</span></h5>

                    


                    <div id="loans_vs_maturities"></div>

                   
                
                 
                    <!-- End Line Chart -->
                  </div>
                </div>
              </div>

              <div class="col-lg-6">
                <div class="card">
                  <div class="filter">
                    <a class="icon" href="#" data-bs-toggle="dropdown"
                      ><i class="bi bi-three-dots"></i
                    ></a>
                    <ul
                      class="dropdown-menu dropdown-menu-end dropdown-menu-arrow"
                    >
                      <li class="dropdown-header text-start">
                        <h6>Filter</h6>
                      </li>

                      <li><a class="dropdown-item" href="#">Today</a></li>
                      <li><a class="dropdown-item" href="#">This Month</a></li>
                      <li><a class="dropdown-item" href="#">This Year</a></li>
                    </ul>
                  </div>

                  <div class="card-body">
                    <h5 class="card-title">Number of Loans Advanced vs Number of Maturities <span>/Today</span></h5>

           
                    <div id="loan_counts_vs_maturity_counts"></div>
                
                 
                    <!-- End Line Chart -->
                  </div>
                </div>
              </div>
              <!-- End Recent Sales -->
              <!-- Reports -->
              <div class="col-lg-4">
                <div class="card">
                  <div class="filter">
                    <a class="icon" href="#" data-bs-toggle="dropdown"
                      ><i class="bi bi-three-dots"></i
                    ></a>
                    <ul
                      class="dropdown-menu dropdown-menu-end dropdown-menu-arrow"
                    >
                      <li class="dropdown-header text-start">
                        <h6>Filter</h6>
                      </li>

                      <li><a class="dropdown-item" href="#">Today</a></li>
                      <li><a class="dropdown-item" href="#">This Month</a></li>
                      <li><a class="dropdown-item" href="#">This Year</a></li>
                    </ul>
                  </div>

                  <div class="card-body">
                    <h5 class="card-title">Transaction Type Allocation <span>/Today</span></h5>

                    


                    <div id="transaction_type_proportions"></div>

                   
                
                 
                    <!-- End Line Chart -->
                  </div>
                </div>
              </div>

              <div class="col-lg-8">
                <div class="card">
                  <div class="filter">
                    <a class="icon" href="#" data-bs-toggle="dropdown"
                      ><i class="bi bi-three-dots"></i
                    ></a>
                    <ul
                      class="dropdown-menu dropdown-menu-end dropdown-menu-arrow"
                    >
                      <li class="dropdown-header text-start">
                        <h6>Filter</h6>
                      </li>

                      <li><a class="dropdown-item" href="#">Today</a></li>
                      <li><a class="dropdown-item" href="#">This Month</a></li>
                      <li><a class="dropdown-item" href="#">This Year</a></li>
                    </ul>
                  </div>

                  <div class="card-body">
                    <h5 class="card-title">Transaction Type Amounts <span>/Today</span></h5>

           
                    <div id="transaction_type_amount"></div>
                
                 
                    <!-- End Line Chart -->
                  </div>
                </div>
              </div>

              <div class="col-lg-4">
                <div class="card">
                  <div class="filter">
                    <a class="icon" href="#" data-bs-toggle="dropdown"
                      ><i class="bi bi-three-dots"></i
                    ></a>
                    <ul
                      class="dropdown-menu dropdown-menu-end dropdown-menu-arrow"
                    >
                      <li class="dropdown-header text-start">
                        <h6>Filter</h6>
                      </li>

                      <li><a class="dropdown-item" href="#">Today</a></li>
                      <li><a class="dropdown-item" href="#">This Month</a></li>
                      <li><a class="dropdown-item" href="#">This Year</a></li>
                    </ul>
                  </div>

                  <div class="card-body">
                    <h5 class="card-title">Total Demographic Split <span>/Today</span></h5>

                    


                    <div id="total_demographic_split"></div>

                   
                
                 
                    <!-- End Line Chart -->
                  </div>
                </div>
              </div>

              <div class="col-lg-8">
                <div class="card">
                  <div class="filter">
                    <a class="icon" href="#" data-bs-toggle="dropdown"
                      ><i class="bi bi-three-dots"></i
                    ></a>
                    <ul
                      class="dropdown-menu dropdown-menu-end dropdown-menu-arrow"
                    >
                      <li class="dropdown-header text-start">
                        <h6>Filter</h6>
                      </li>

                      <li><a class="dropdown-item" href="#">Today</a></li>
                      <li><a class="dropdown-item" href="#">This Month</a></li>
                      <li><a class="dropdown-item" href="#">This Year</a></li>
                    </ul>
                  </div>

                  <div class="card-body">
                    <h5 class="card-title">Demographic Split Per Month <span>/Today</span></h5>

           
                    <div id="demographic_split_per_month"></div>
                
                 
                    <!-- End Line Chart -->
                  </div>
                </div>
              </div>

            </div>
          </div>
          <!-- End Left side columns -->

          <!-- Right side columns -->
          <div class="col-lg-4">
            <!-- Budget Report -->
          </div>
          <!-- End Right side columns -->
        </div>
      </section>
    </main>
    c
    <script>
      // Render Risk Allocation Chart
      var riskAllocationChart = JSON.parse('{{ risk_allocation_chart|safe }}');
      Plotly.newPlot('risk-allocation-chart', riskAllocationChart.data, riskAllocationChart.layout);

      // Render Risk Proportions Chart
      var riskProportionsChart = JSON.parse('{{ risk_proportions_chart|safe }}');
      Plotly.newPlot('risk-proportions-chart', riskProportionsChart.data, riskProportionsChart.layout);

      var loansVsMaturities = JSON.parse('{{ loans_vs_maturities|safe }}');
      Plotly.newPlot('loans_vs_maturities', loansVsMaturities.data, loansVsMaturities.layout);

      var loanCountsVsMaturityCounts = JSON.parse('{{ loan_counts_vs_maturity_counts|safe }}');
      Plotly.newPlot('loan_counts_vs_maturity_counts', loanCountsVsMaturityCounts.data, loanCountsVsMaturityCounts.layout);

      var transactionTypeProportions = JSON.parse('{{ transaction_type_proportions|safe }}');
      Plotly.newPlot('transaction_type_proportions', transactionTypeProportions.data, transactionTypeProportions.layout);

      var transactionTypeAmount = JSON.parse('{{ transaction_type_amount|safe }}');
      Plotly.newPlot('transaction_type_amount', transactionTypeAmount.data, transactionTypeAmount.layout);

      var totalDemographicSplit = JSON.parse('{{ total_demographic_split|safe }}');
      Plotly.newPlot('total_demographic_split', totalDemographicSplit.data, totalDemographicSplit.layout);

      var demographicSplitPerMonth = JSON.parse('{{ demographic_split_per_month|safe }}');
      Plotly.newPlot('demographic_split_per_month', demographicSplitPerMonth.data, demographicSplitPerMonth.layout);
  </script>
{% endblock content %}
